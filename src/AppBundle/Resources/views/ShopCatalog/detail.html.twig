{% extends 'AppBundle::base.html.twig' %}

{% block body %}
<div class="product-detail row">

    <div class="col-md-3">
        {% include '@App/ShopCatalog/leftPanel.html.twig' %}
    </div>

    <div class="col-md-9">
         <div class="row">
            <div class="col-md-12 bread">
                <a href="/">Úvod</a>
                / <a href="{{ path('shop_catalog_list', { slug: product.mainCategory.slug }) }}">{{ product.mainCategory.name }}</a>
                / <span>{{ product.name }}</span>
            </div>

            <div class="col-md-12">
                <h2>{{ product.name }}</h2>
            </div>

            <div class="col-lg-6 col-md-12 left">
                <div class="image">

                    <a class="gallery" data-fancybox="images" data-type="image" href="{{ path('image_cache', { id: product.images[0].id, setting: '1200x1200x0'}) }}">
                      <img width="100%" src="{{ path('image_cache', { id: product.images[0].id, setting: '800x800x0'}) }}" />
                    </a>
                </div>

                <div class="row" style="margin-top: 10px;">
                    {% for key, image in product.images %}
                        {% if key > 0 %}
                        <div class="col-md-4 col-4">
                            <div>
                                <a class="gallery" data-fancybox="images" data-type="image" href="{{ path('image_cache', { id: image.id, setting: '1200x1200x0'}) }}">
                                    <img width="100%" src="{{ path('image_cache', { id: image.id, setting: '400x300x1'}) }}" />
                                </a>
                            </div>
                        </div>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>

            <div class="col-lg-6 col-md-12 right">

                {% if product.subname %}
                <h3>{{ product.subname }}</h3>
                {% endif %}

                <p class="short-description">{{ product.annotation }}</p>

                <div class="availability">U vás do {{ product.availability }} dní</div>

                <form id="product-detail-form" action="{{ path('shop_cart_add', { id: product.id}) }}" method="POST" enctype="multipart/form-data">
                <table style="width: 100%;">
                    <colgroup><col><col style="width: 60%">
                    </colgroup>
                    <tbody>
                        <tr>
                            <td class="price">
                                {{ product.price | price }}
                            </td>
                            <td>

                                    <div class="cart-add">
                                        <input type="text" size="5" class="quantity" name="quantity" value="1" />
                                        <button type="submit" class="btn btn-success">
                                            <i class="fas fa-shopping-basket"></i>&nbsp;DO KOŠÍKU
                                        </button>
                                    </div>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <table id="product-detail-info" style="width: 100%">
                    <colgroup><col><col style="width: 60%">
                    </colgroup><tbody>

                    <tr>
                        <td class="l-col">
                            Kód produktu
                        </td>
                        <td class="td-code">
                            <span>{{ product.model }}</span>
                        </td>
                    </tr>



                    <tr>
                        <td class="l-col">
                            Značka
                        </td>
                        <td>
                            GOWOOD
                        </td>
                    </tr>

                    <tr>
                        <td class="l-col">
                            Záruka
                        </td>
                        <td>
                            2 roky
                        </td>
                    </tr>


                    </tbody>
                </table>

                {% if product.attributes.count %}
                  <div class="attribute-form-title">Napište, jak to máme vyrobit :)</div>
                  {{ form_widget(attributeForm) }}
                {% endif %}

                </form>

                {% if product.module %}
                    {% include('AppBundle::ShopCatalog/Editor/' ~ product.module ~ '.html.twig') %}
                {% endif %}

            </div>

            {% if product.description %}
            <div class="col-md-12">
                <h3 class="description-title">Popis</h3>
                {{ product.description | raw }}
            </div>
            {% endif %}
         </div>
    </div>
</div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('js/detail.js') }}"></script>
    <script src="{{ asset('js/jquery.fancybox.min.js') }}"></script>
    <script src="{{ asset('js/jqueryvalidation/jquery.validate.min.js') }}"></script>
    <script src="{{ asset('js/jqueryvalidation/localization/messages_cs.js') }}"></script>
{% endblock %}